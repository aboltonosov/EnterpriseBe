
#Область СлужебныйПрограммныйИнтерфейс

// Обработчик формирования строки наименования позиции штатного расписания.
//
Процедура ПриЗаполненииНаименованияПозицииШтатногоРасписания(Форма, СтандартнаяОбработка) Экспорт
	
	Если Форма.Элементы.Найти("МестоВСтруктуреПредприятия") = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Если Не ЗначениеЗаполнено(Форма.МестоВСтруктуреПредприятия.Подразделение) Тогда
		// Если управленческое подразделение не заполнено, сохраняем прежний порядок именования позиции.
		Возврат;
	КонецЕсли;
	
	Если Не Форма.ПолучитьФункциональнуюОпциюФормы("ИспользоватьЗарплатаКадрыКорпоративнаяПодсистемы") Тогда 
		Возврат;
	КонецЕсли;
	
	СтандартнаяОбработка = Ложь;
	
	Объект = Форма.Объект; 
	
	ДополнительныеПараметры = Новый Структура;
	ДополнительныеПараметры.Вставить("Организация", Объект.Владелец);
	ДополнительныеПараметры.Вставить("МестоВСтруктуреПредприятия", Форма.МестоВСтруктуреПредприятия.Подразделение);
	
	Объект.Наименование = УправлениеШтатнымРасписаниемКлиентСервер.НаименованиеПозицииШтатногоРасписания(
		Объект.Подразделение, 
		Объект.Должность, 
		ДополнительныеПараметры)
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура ВыбратьУправленческуюПозициюИзСписка(Форма, АдресСпискаПодобранных) Экспорт 
	
	УправленческаяОрганизация = ОбщегоНазначенияКлиентСервер.ПредопределенныйЭлемент("Справочник.Организации.УправленческаяОрганизация");

	
	СтруктураОтбор = Новый Структура;
	СтруктураОтбор.Вставить("Владелец", УправленческаяОрганизация);
	
	ПараметрыОткрытия = Новый Структура;
	ПараметрыОткрытия.Вставить("Отбор", СтруктураОтбор);
	ПараметрыОткрытия.Вставить("РежимВыбора", Истина);
	ПараметрыОткрытия.Вставить("МножественныйВыбор", Истина);
	ПараметрыОткрытия.Вставить("СкрытьПанельВводаДокументов", Истина);
	ПараметрыОткрытия.Вставить("АдресСпискаПодобранных", АдресСпискаПодобранных);
	
	ОткрытьФорму("Справочник.ШтатноеРасписание.ФормаВыбора", ПараметрыОткрытия, Форма.Элементы.Позиции);
	
КонецПроцедуры

#КонецОбласти
