////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Заголовок = СтроковыеФункцииКлиентСервер.ПодставитьПараметрыВСтроку(
		НСтр("ru = 'Сотрудники (%1)'"), 
		Параметры.Отбор.Организация);
		
	ОтчетныйПериод = Параметры.ОтчетныйПериод;		
		
	КорректируемыйПериод = ПерсонифицированныйУчетКлиентСервер.ПредшествующийОтчетныйПериодПерсУчета(ОтчетныйПериод);
	
	КорректируемыйПериодСтрока = ПерсонифицированныйУчетКлиентСервер.ПредставлениеОтчетногоПериода(КорректируемыйПериод);
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ШАПКИ ФОРМЫ

&НаКлиенте
Процедура КорректируемыйПериодСтрокаРегулирование(Элемент, Направление, СтандартнаяОбработка)
		
	Если Не ((КорректируемыйПериод = '20100101' И Направление = -1) Или (КорректируемыйПериод = ДобавитьМесяц(ОтчетныйПериод, - 3) И Направление = 1))  Тогда
		ПерсонифицированныйУчетКлиент.ОтчетныйПериодРегулирование(КорректируемыйПериод, КорректируемыйПериодСтрока, Направление);
	КонецЕсли;	

КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ СОБЫТИЙ ТАБЛИЦЫ ФОРМЫ Список

&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	Если ВыбранныеСотруднки.НайтиСтроки(Новый Структура("ФизическоеЛицо", ВыбраннаяСтрока)).Количество() = 0 Тогда
		НоваяСтрока = ВыбранныеСотруднки.Добавить();
		НоваяСтрока.ФизическоеЛицо = ВыбраннаяСтрока;
	КонецЕсли;			
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ОБРАБОТЧИКИ КОМАНД ФОРМЫ

&НаКлиенте
Процедура ОК(Команда)
	МассивФизЛиц = Новый Массив;
	
	Для Каждого ВыбраннаяСтрока Из ВыбранныеСотруднки Цикл 
		МассивФизЛиц.Добавить(ВыбраннаяСтрока.ФизическоеЛицо);
	КонецЦикла;	
	
	Закрыть(Новый Структура("КорректируемыйПериод, МассивФизЛиц", КорректируемыйПериод, МассивФизЛиц));
КонецПроцедуры

&НаКлиенте
Процедура Отмена(Команда)
	Закрыть();
КонецПроцедуры


