
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Перем ОтборПравил, ОтборПоВладельцу;
	
	ВладелецОпределен = Ложь;
	Если Параметры.Свойство("Отбор", ОтборПравил) Тогда
		Если ОтборПравил.Свойство("Владелец", ОтборПоВладельцу) Тогда
			Если ЗначениеЗаполнено(ОтборПоВладельцу) Тогда
				ВладелецОпределен = Истина;
			КонецЕсли;
		КонецЕсли;
	КонецЕсли;
	
	Если Не ВладелецОпределен Тогда
		ВызватьИсключение НСтр("ru = 'Просмотреть список лимитов можно только в форме модели бюджетирования'");
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ДобавитьПоБюджету(Команда)
	
	МодельБюджетирования = Неопределено;
	Для Каждого Отбор из Список.Отбор.Элементы Цикл
		Если Строка(Отбор.ЛевоеЗначение) = "Владелец" Тогда
			МодельБюджетирования = Отбор.ПравоеЗначение;
		КонецЕсли;
	КонецЦикла;
	
	ПараметрыФормы = Новый Структура("Владелец", МодельБюджетирования);
	
	ОписаниеОповещения = Новый ОписаниеОповещения("СозданиеЭлементовПоВидуБюджета", ЭтаФорма);
	ОткрытьФорму("Справочник.ПравилаЛимитовПоДаннымБюджетирования.Форма.ВыборЭлементовВидаБюджета", ПараметрыФормы,,,,,
																			ОписаниеОповещения,
																			РежимОткрытияОкнаФормы.БлокироватьОкноВладельца);
	
КонецПроцедуры

&НаКлиенте
Процедура СозданиеЭлементовПоВидуБюджета(РезультатВыбора, ДопПараметры) Экспорт
	
	Если РезультатВыбора = Истина Тогда
		
		Элементы.Список.Обновить();
		
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ЛимитыРасходаДС(Команда)
	
	ОткрытьФорму("Отчет.ЛимитыРасходаДенежныхСредствПоДаннымБюджетирования.Форма", Новый Структура("СформироватьПриОткрытии", Истина));
	
КонецПроцедуры

#КонецОбласти

