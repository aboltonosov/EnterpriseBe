#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ, Замещение)
	Если ЗарплатаКадры.ОтключитьБизнесЛогикуПриЗаписи(ЭтотОбъект) Тогда
		Возврат;
	КонецЕсли;	
	
	Запрос = Новый Запрос;
	Запрос.МенеджерВременныхТаблиц = Новый МенеджерВременныхТаблиц;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ПараметрыПериодовСтажаПФР.ГоловнаяОрганизация,
	|	ПараметрыПериодовСтажаПФР.ФизическоеЛицо,
	|	ПараметрыПериодовСтажаПФР.ТипДоговора,
	|	ПараметрыПериодовСтажаПФР.Начало,
	|	ПараметрыПериодовСтажаПФР.Окончание,
	|	ПараметрыПериодовСтажаПФР.Приоритет,
	|	ПараметрыПериодовСтажаПФР.Сторно,
	|	ПараметрыПериодовСтажаПФР.ДокументОснование,
	|	ПараметрыПериодовСтажаПФР.ВидСтажаПФР,
	|	ПараметрыПериодовСтажаПФР.Организация,
	|	ПараметрыПериодовСтажаПФР.Подразделение,
	|	ПараметрыПериодовСтажаПФР.ДолжностьПоШтатномуРасписанию,
	|	ПараметрыПериодовСтажаПФР.ГрафикРаботы,
	|	ПараметрыПериодовСтажаПФР.Должность,
	|	ПараметрыПериодовСтажаПФР.КоличествоСтавок,
	|	ПараметрыПериодовСтажаПФР.ТерриториальныеУсловия,
	|	ПараметрыПериодовСтажаПФР.ОсобыеУсловияТруда,
	|	ПараметрыПериодовСтажаПФР.ОснованиеВыслугиЛет,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаВидСтажаПФР,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаОрганизация,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаПодразделение,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаДолжностьПоШтатномуРасписанию,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаДолжность,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаГрафикРаботы,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаКоличествоСтавок,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаТерриториальныеУсловия,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаОсобыеУсловияТруда,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаОснованиеВыслугиЛет,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаТерритория,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаУсловияТруда,
	|	ПараметрыПериодовСтажаПФР.Территория,
	|	ПараметрыПериодовСтажаПФР.УсловияТруда,
	|	ПараметрыПериодовСтажаПФР.Сотрудник,
	|	ПараметрыПериодовСтажаПФР.ВнутреннееСовместительство,
	|	ПараметрыПериодовСтажаПФР.ИспользованиеРесурсаВнутреннееСовместительство
	|ПОМЕСТИТЬ ВТПредыдущиеДанныеРегистра
	|ИЗ
	|	РегистрСведений.ПараметрыПериодовСтажаПФР КАК ПараметрыПериодовСтажаПФР
	|ГДЕ
	|	ПараметрыПериодовСтажаПФР.Регистратор = &Регистратор";
	
	Запрос.УстановитьПараметр("Регистратор", ЭтотОбъект.Отбор.Регистратор.Значение);
	
	Запрос.Выполнить();
	
	ДополнительныеСвойства.Вставить("МенеджерВременныхТаблиц", Запрос.МенеджерВременныхТаблиц);
	
КонецПроцедуры

Процедура ПриЗаписи(Отказ, Замещение)
	// 4D:ERP для Беларуси, Яна, 24.07.2017 11:19:03 
	// Ошибка Поле не найдено "ТаблицаДат.ЗастрахованПФР", №15521 
	// {
	Если ЗарплатаКадры.ОтключитьБизнесЛогикуПриЗаписи(ЭтотОбъект) Тогда
		Возврат;
	КонецЕсли;	

	Если Не ДополнительныеСвойства.Свойство("МенеджерВременныхТаблиц") Тогда
		Возврат;
	КонецЕсли;	
	// }
	// 4D

КонецПроцедуры

#КонецОбласти

#КонецЕсли
